<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mealkitz.io â€“ Historia de tu Punto de Venta</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Adjust body padding to accommodate fixed footer alert */
      body {
        font-family: 'Poppins', sans-serif;
        background-color: #f8f9fa;
        padding-top: 1rem;      /* added to match second code */
        padding-bottom: 5rem;
      }

      /* Navbar styling adapted from second code */
      .navbar {
        box-shadow: 0 2px 4px rgba(0,0,0,.08);  /* softer shadow */
        background-color: #fff;
        margin-bottom: 1rem;
      }
      .navbar-brand {
        font-weight: 600;
        color: #123A62 !important;
      }
      .navbar-toggler {
        border: none;  /* remove default border */
      }
      .navbar-toggler-icon {
        /* custom hamburger colored to match brand */
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(18,58,98,0.8)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
      }

      .btn, .btn-link {
        outline: none !important;
        box-shadow: none !important;
        border: none !important;
      }
      .btn-primary {
        background-color: #123A62;
        color: #fff;
        border: 2px solid #123A62 !important;
      }
      .btn-secondary {
        background-color: #6c757d;
        color: #fff;
        border: 2px solid #6c757d !important;
      }
      .btn-primary:hover {
        background-color: #0e3150;
        transform: translateY(-2px);
      }
      .btn-secondary:hover {
        background-color: #5a6268;
        transform: translateY(-2px);
      }
      .btn.disabled, .btn:disabled {
        background-color: #6c757d !important;
        border-color: #6c757d !important;
        color: #fff !important;
        cursor: not-allowed !important;
        opacity: 0.65;
      }
      .container-main {
        background: #fff;
        padding: 2rem;
        border-radius: .5rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        margin-top: 1rem;
      }
      .modal-body {
        padding: 2rem;
      }
      .form-control, .form-select {
        margin-bottom: 1rem;
      }
      /* Responsive styling for large buttons to take full width on small screens */
      @media (max-width: 767.98px) {
        .btn-lg.full-width-sm {
          display: block;
          width: 100%;
          margin-bottom: 0.5rem;
        }
        .btn-lg.full-width-sm:last-child {
          margin-bottom: 0;
        }
      }
      /* Styles for the main hero section with a blue background */
      .hero-blue-background {
        background-color: #123A62;
        color: #fff;
        padding: 2rem;
        border-radius: .5rem;
        margin-bottom: 1rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      .hero-blue-background h1 {
        margin: 0;
        font-weight: normal;
      }
      .hero-blue-background p {
        color: #f1f1f1;
        font-size: 1rem;
      }
      /* Floating footer sign-up alert with slide-up animation */
      #signupAlert {
        position: fixed;
        bottom: -100px;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 600px;
        z-index: 1050;
        border-radius: 0;
        transition: bottom 0.5s ease-out;
      }
      #signupAlert.visible {
        bottom: 0;
      }

      #navbarIcons.collapsing {
        height: 0;
        overflow: hidden;
        transition: height 0.5s ease-in-out;
      }

      /* Custom Navbar Link Styling (copied from punto.html & datos.html) */
      @media (max-width: 767.98px) { /* Bootstrap's md breakpoint */
        .navbar-collapse .navbar-nav .nav-item {
          text-align: center;
        }
        .navbar-collapse .navbar-nav .nav-link {
          padding-top: 0.75rem;
          padding-bottom: 0.75rem;
        }
        .navbar-collapse .navbar-nav {
          margin-top: 0.5rem;
        }
        .navbar-collapse .navbar-nav.me-auto {
            margin-right: 0 !important;
            margin-left: 0 !important;
            width: 100%;
        }
         .navbar-collapse .d-flex.ms-auto {
            width: 100%;
            justify-content: center;
            margin-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
      }

      @media (min-width: 768px) {
        .navbar-collapse ul.navbar-nav.me-auto {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }
      }

      .navbar-nav .nav-link {
        transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
      }
      .navbar-nav .nav-link:hover,
      .navbar-nav .nav-link:focus {
        background-color: #e9ecef;
        color: #0056b3;
        border-radius: 0.375rem;
      }
      .navbar-nav .nav-link i {
        font-size: 1.1em;
        vertical-align: text-bottom;
        margin-right: 0.35em !important;
      }

      @media (max-width: 575.98px) {
        .card-value {
          font-size: 2.25em; /* Smaller font for mobile */
          margin-bottom: .25rem; /* Reduced margin for mobile */
        }
        .card-label {
          font-size: 0.8rem; /* Even smaller label on mobile */
        }
      }

      .card-label {
        color: #6c757d;
        font-size: 0.9rem;
        text-align: center; /* Added to ensure centering */
      }

      .card-value {
        font-size: 3em;
        margin-bottom: .5rem;
        color: #123A62;
        font-weight: 600;
        text-align: center; /* Added to ensure centering */
      }

      /* Specific styles for hacemos.html sections to be restored/added */

      /* Hero CTA button styling (based on original hacemos.html hero CTA) */
      .btn-cta {
        background-color: #198754; /* Green for CTA */
        color: #ffffff !important; /* Ensure text is white */
        font-weight: 600;
        padding: 0.75rem 2rem;
        border-radius: 0.5rem;
        transition: background-color 0.2s, transform 0.2s;
        text-decoration: none; /* Ensure no underline if it's an <a> tag */
      }
      .btn-cta:hover {
        background-color: #157347; /* Darker green on hover */
        color: #ffffff !important;
        transform: translateY(-2px);
      }

      /* Features Section */
      .features-section {
        padding: 3rem 1rem;
      }
      .features-section h2 {
        text-align: center;
        color: #123a62;
        margin-bottom: 2rem;
      }
      .feature-card {
        background-color: #ffffff;
        border: none; /* Assuming a borderless look is preferred, aligned with global .btn */
        border-radius: 0.75rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        padding: 1.5rem;
        text-align: center;
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .feature-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      }
      .feature-card i {
        font-size: 2rem;
        color: #198754; /* Green icons for features */
        margin-bottom: 0.75rem;
      }
      .feature-card h5 {
        margin-bottom: 0.5rem;
        color: #123a62;
        font-size: 1.1rem;
        font-weight: 600; /* Ensuring consistent heading weight */
      }
      .feature-card p {
        color: #6c757d;
        font-size: 0.9rem;
      }

      /* Steps Section */
      .steps-section {
        padding: 3rem 1rem;
        /* background-color: #ffffff; Removed: sections are inside .container-main which has white bg */
        /* border-radius: 0.75rem; Removed: sections are inside .container-main */
        /* box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04); Removed: sections are inside .container-main */
      }
      .steps-section h3 {
        text-align: center;
        color: #123a62;
        margin-bottom: 2rem;
        font-weight: 600; /* Ensuring consistent heading weight */
      }
      .step-card {
        background-color: #fefefe; /* Slight off-white for cards */
        border: 1px solid #e9ecef;
        border-radius: 0.75rem;
        padding: 1.5rem;
        text-align: center;
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .step-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
      }
      .step-card i {
        font-size: 2rem;
        color: #123a62; /* Dark blue icons for steps */
        margin-bottom: 0.75rem;
      }
      .step-card h5 {
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #123a62;
      }
      .step-card p {
        font-size: 0.9rem;
        color: #6c757d;
      }

      /* "Ideal para" List */
      .ideal-section {
        padding: 2rem 1rem;
      }
      .ideal-section h3 {
        text-align: center;
        color: #123a62;
        margin-bottom: 1.5rem;
        font-weight: 600; /* Ensuring consistent heading weight */
      }
      .ideal-section ul li {
        margin-bottom: 0.75rem;
        font-size: 0.95rem;
        font-weight: 400; /* Ensuring consistent paragraph weight */
      }
      .ideal-section ul li i {
        color: #28a745; /* Green checkmark icons */
        margin-right: 0.5rem;
      }

      /* Footer Note Banner */
      .note-banner {
        padding: 1rem;
        background-color: #198754; /* Green banner */
        color: #ffffff;
        text-align: center;
        border-radius: 0.5rem;
        margin-top: 2rem;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="index.html">
          <img
            src="Images/mk_logo.jpeg"
            alt="Mealkitz Logo"
            style="height: 35px; margin-right: 0.5rem;"
          />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarContent"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarContent">
          <ul class="navbar-nav mx-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link" href="hacemos.html">Â¿QuÃ© hacemos?</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="punto.html">Mealkitz.io (DEMO)</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="iniciar.html">Iniciar SesiÃ³n</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="ayuda.html">Ayuda</a>
            </li>
          </ul>
          <a href="punto.html" class="btn btn-primary ms-md-3">RegÃ­strate Ahora</a>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <main class="container container-main">
      <section class="hero hero-blue-background">
        <h1>Bienvenido a Mealkitz.io</h1>
        <p>Usamos tecnologÃ­a sencilla y confiable para que emprendedores gastronÃ³micos,
          artesanos y pequeÃ±os negocios facturen de forma segura, organicen operaciones
          y comprendan sus finanzas para crecer.</p>
        <a href="punto.html" class="btn btn-cta">Comenzar Ahora</a>
      </section>

    <!-- Features Section -->
    <section class="features-section">
      <div class="container">
        <h2>Lo que puedes hacer con Mealkitz.io</h2>
        <div class="row g-4">
          <div class="col-6 col-md-4 col-lg-3">
            <a href="punto.html" class="feature-link text-decoration-none">
              <div class="feature-card h-100">
                <i class="bi bi-shop"></i>
                <h5>Punto de Venta</h5>
                <p>Administra ventas en tienda fÃ­sica y en lÃ­nea.</p>
              </div>
            </a>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <a href="punto.html" class="feature-link text-decoration-none">
              <div class="feature-card h-100">
                <i class="bi bi-cart"></i>
                <h5>Vender Online</h5>
                <p>Implementa tu tienda en lÃ­nea sin complicaciones.</p>
              </div>
            </a>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <a href="punto.html" class="feature-link text-decoration-none">
              <div class="feature-card h-100">
                <i class="bi bi-receipt"></i>
                <h5>Facturar</h5>
                <p>Genera facturas electrÃ³nicas homologadas en segundos.</p>
              </div>
            </a>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <a href="punto.html" class="feature-link text-decoration-none">
              <div class="feature-card h-100">
                <i class="bi bi-file-earmark-text"></i>
                <h5>Generar Cotizaciones</h5>
                <p>Crea presupuestos personalizados para tus clientes.</p>
              </div>
            </a>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <a href="punto.html" class="feature-link text-decoration-none">
              <div class="feature-card h-100">
                <i class="bi bi-bar-chart"></i>
                <h5>Analizar Tus Datos</h5>
                <p>Visualiza reportes de ventas e inventario en tiempo real.</p>
              </div>
            </a>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
          </div>
        </div>
      </div>
    </section>

    <!-- Ideal Para Section -->
    <section class="ideal-section">
      <div class="container">
        <h3>Ideal para</h3>
        <div class="row gx-4 gy-3">
          <div class="col-6 col-md-3">
            <ul class="list-unstyled">
              <li><i class="bi bi-check-circle-fill"></i>Bakery casera</li>
              <li><i class="bi bi-check-circle-fill"></i>Food truck</li>
              <li><i class="bi bi-check-circle-fill"></i>Restaurante pop-up</li>
            </ul>
          </div>
          <div class="col-6 col-md-3">
            <ul class="list-unstyled">
              <li><i class="bi bi-check-circle-fill"></i>Cocina oculta</li>
              <li><i class="bi bi-check-circle-fill"></i>Catering pequeÃ±o</li>
              <li><i class="bi bi-check-circle-fill"></i>ArtesanÃ­as alimenticias</li>
            </ul>
          </div>
          <div class="col-6 col-md-3">
            <ul class="list-unstyled">
              <li><i class="bi bi-check-circle-fill"></i>Jabones y cremas</li>
              <li><i class="bi bi-check-circle-fill"></i>ConsultorÃ­a</li>
              <li><i class="bi bi-check-circle-fill"></i>Chef privado</li>
            </ul>
          </div>
          <div class="col-6 col-md-3">
            <ul class="list-unstyled">
              <li><i class="bi bi-check-circle-fill"></i>Talleres de cocina</li>
              <li><i class="bi bi-check-circle-fill"></i>Fonda</li>
              <li><i class="bi bi-check-circle-fill"></i>Almuerzos corporate</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Steps Section -->
    <section class="steps-section mx-auto my-5" style="max-width: 900px;">
      <h3>Paso a Paso</h3>
      <div class="row g-4">
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="step-card h-100">
            <i class="bi bi-person-plus-fill"></i>
            <h5>1. RegÃ­strate</h5>
            <p>RegÃ­strate gratis con nombre, correo y contraseÃ±a.</p>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="step-card h-100">
            <i class="bi bi-gear-fill"></i>
            <h5>2. Configura tu negocio</h5>
            <p>Agrega ubicaciÃ³n, datos fiscales y catÃ¡logo de productos.</p>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="step-card h-100">
            <i class="bi bi-receipt-cutoff"></i>
            <h5>3. Factura</h5>
            <p>Emite facturas electrÃ³nicas con validaciÃ³n automÃ¡tica.</p>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="step-card h-100">
            <i class="bi bi-basket3-fill"></i>
            <h5>4. Gestiona pedidos</h5>
            <p>Centraliza pedidos, controla inventario y reportes en tiempo real.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Call to Action & Note -->
    <div class="text-center mb-5">
      <a href="punto.html" class="btn btn-cta mb-3">Comenzar Ahora</a>
      <div class="note-banner">
        Mealkitz opera con una tarifa transparente del <strong>10% por transacciÃ³n</strong>. Sin costos fijos ni sorpresas.
      </div>
    </div>

    <!-- Modals (unchanged, but simplified) -->
    <!-- Registro Modal -->
    <div
      class="modal fade"
      id="comenzarRegistroModal"
      tabindex="-1"
      aria-labelledby="comenzarRegistroModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="comenzarRegistroModalLabel">
              RegÃ­strate con Mealkitz
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <form id="comenzarRegistroForm">
              <div class="row g-3">
                <div class="col-12">
                  <label for="registroNombreCompleto" class="form-label"
                    >Nombre Completo<span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="registroNombreCompleto"
                    required
                  />
                </div>
                <div class="col-12">
                  <label for="registroNombreNegocio" class="form-label"
                    >Nombre de Negocio<span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="registroNombreNegocio"
                    required
                  />
                </div>
                <div class="col-12">
                  <label for="registroTipoNegocio" class="form-label"
                    >Tipo de Negocio<span class="text-danger">*</span></label
                  >
                  <select
                    class="form-select"
                    id="registroTipoNegocio"
                    required
                  >
                    <option value="" disabled selected>Selecciona uno...</option>
                    <option value="Emprendedor GastronÃ³mico">
                      Emprendedor GastronÃ³mico
                    </option>
                    <option value="Artesano">Artesano</option>
                    <option value="PequeÃ±o Negocio">PequeÃ±o Negocio</option>
                    <option value="Restaurante/CafeterÃ­a">
                      Restaurante / CafeterÃ­a
                    </option>
                    <option value="Food Truck">Food Truck</option>
                    <option value="Otro">Otro</option>
                  </select>
                </div>
                <div class="col-12">
                  <label for="registroEmail" class="form-label"
                    >Correo ElectrÃ³nico<span class="text-danger">*</span></label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="registroEmail"
                    required
                  />
                </div>
                <div class="col-12">
                  <label for="registroTelefono" class="form-label"
                    >TelÃ©fono (WhatsApp)<span class="text-danger">*</span></label
                  >
                  <input
                    type="tel"
                    class="form-control"
                    id="registroTelefono"
                    placeholder="+507 6xxxxxxx"
                    required
                  />
                </div>
                <div class="col-12">
                  <label for="registroMensaje" class="form-label"
                    >Mensaje (Opcional)</label
                  >
                  <textarea
                    class="form-control"
                    id="registroMensaje"
                    rows="2"
                    placeholder="CuÃ©ntanos tus necesidades..."
                  ></textarea>
                </div>
              </div>
              <div id="registroFormFeedback" class="mt-3"></div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>
            <button type="submit" form="comenzarRegistroForm" class="btn btn-primary">
              Enviar Solicitud
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Login Required Modal -->
    <div
      class="modal fade"
      id="loginRequiredModal"
      tabindex="-1"
      aria-labelledby="loginRequiredModalLabel"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="loginRequiredModalLabel">
              <i class="bi bi-exclamation-triangle-fill text-warning me-2"></i>
              Inicio de SesiÃ³n Requerido
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <p>
              Para acceder a esta funciÃ³n, por favor, inicia sesiÃ³n o crea una
              cuenta.
            </p>
          </div>
          <div class="modal-footer justify-content-center">
            <a href="iniciar.html" class="btn btn-primary">Iniciar SesiÃ³n</a>
            <a href="iniciar.html?action=register" class="btn btn-secondary">
              Crear Cuenta
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/auth-navbar.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const loginRequiredModalEl = document.getElementById('loginRequiredModal');
        const loginRequiredModalInstance = loginRequiredModalEl ? new bootstrap.Modal(loginRequiredModalEl) : null;
        let postLoginRedirectData = null;

        try {
            const postLoginRedirectRAW = sessionStorage.getItem('postLoginRedirect');
            if (postLoginRedirectRAW) {
                postLoginRedirectData = JSON.parse(postLoginRedirectRAW);
            }
        } catch (e) {
            console.error("Error parsing postLoginRedirect from sessionStorage (hacemos.html):", e);
            sessionStorage.removeItem('postLoginRedirect'); // Clear corrupted data
        }

        const currentUser = localStorage.getItem('currentUser_mealkitz');

        const commonLoginCheck = (event, destination) => {
            if (!currentUser) {
                if (event) event.preventDefault();
                if (loginRequiredModalInstance) {
                    sessionStorage.setItem('postLoginRedirect', JSON.stringify(destination));
                    loginRequiredModalInstance.show();
                } else {
                    console.error('Login Required Modal not found/initialized on hacemos.html.');
                    window.location.href = 'iniciar.html'; 
                }
                return false;
            }
            return true;
        };

        if (postLoginRedirectData && postLoginRedirectData.page === 'hacemos.html' && postLoginRedirectData.hash && currentUser) {
            const targetModalId = postLoginRedirectData.hash.substring(1);
            const modalElement = document.getElementById(targetModalId);
            if (modalElement && bootstrap.Modal) {
                const modalInstance = bootstrap.Modal.getInstance(modalElement) || new bootstrap.Modal(modalElement);
                if (modalInstance) modalInstance.show();
            }
            sessionStorage.removeItem('postLoginRedirect');
        }

        const navbarRegistrateBtn = document.querySelector('.navbar .btn-primary[href="punto.html"]');
        if (navbarRegistrateBtn) {
            navbarRegistrateBtn.addEventListener('click', function(event) {
                if (!commonLoginCheck(event, { page: 'punto.html' })) return;
            });
        }

        const navbarDemoLink = document.querySelector('.navbar-nav a[href="punto.html"]:not(.btn-primary)');
        if (navbarDemoLink) {
            navbarDemoLink.addEventListener('click', function(event) {
                if (!commonLoginCheck(event, { page: 'punto.html', hash: '#manualChargeModal' })) return;
            });
        }
        
        const heroComenzarBtn = document.querySelector('.hero .btn-cta[href="punto.html"]');
        if (heroComenzarBtn) {
            heroComenzarBtn.addEventListener('click', function(event) {
                if (!commonLoginCheck(event, { page: 'punto.html' })) return;
            });
        }

        document.querySelectorAll('.feature-link[href="punto.html"]').forEach(link => {
            link.addEventListener('click', function(event) {
                if (!commonLoginCheck(event, { page: 'punto.html' })) return; 
            });
        });
        
        const callToActionBtn = document.querySelector('.text-center.mb-5 .btn-cta[href="punto.html"]');
        if(callToActionBtn){
            callToActionBtn.addEventListener('click', function(event){
                if (!commonLoginCheck(event, { page: 'punto.html' })) return;
            });
        }

        const viewProfileLink = document.getElementById('viewProfileLink'); 
        if (viewProfileLink && viewProfileLink.getAttribute('href') === 'perfil.html') {
            viewProfileLink.addEventListener('click', function(event) {
                 if (!commonLoginCheck(event, { page: 'perfil.html' })) return;
            });
        }

        const registroForm = document.getElementById('comenzarRegistroForm');
        const registroFormFeedbackEl = document.getElementById('registroFormFeedback');
        const comenzarRegistroModalEl = document.getElementById('comenzarRegistroModal');

        if (registroForm && comenzarRegistroModalEl) {
            registroForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const formData = new FormData(registroForm);
                const data = Object.fromEntries(formData.entries());
                console.log("Solicitud de Registro (Mealkitz - hacemos.html):", data);
                
                if (registroFormFeedbackEl) {
                    registroFormFeedbackEl.innerHTML = '<div class="alert alert-success" role="alert">Â¡Solicitud enviada! Gracias por registrarte. Nos pondremos en contacto contigo pronto.</div>';
                }
                registroForm.reset();
                const modalInstance = bootstrap.Modal.getInstance(comenzarRegistroModalEl);
                if (modalInstance) {
                    modalInstance.hide();
                }
            });
        }
      });
    </script>
  </body>
</html>
